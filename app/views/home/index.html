<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">
    <script src="http://maps.googleapis.com/maps/api/js"></script>
    <style>
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
        }
        #map {
            height: 90%;
        }
        #my-container {
            height: 10%
        }
        </style>

</head>
<body>

<!--<button type="button" class="btn btn-info btn-lg" data-toggle="modal" data-target="#create-message" >Create message</button>-->

<!--<%= link_to 'Add message', new_message_path,  {:remote => true, 'data-toggle' =>  "modal", 'data-target' => '#create-message'}  %>

<div id="create-message"  role="dialog" aria-labelledby="myModalLabel" , style="display:none;">

    <div class="modal-body">
    <%= form_for  :message, :action => 'create' ,:controller => 'message'    do |f| %><!--//ng-submit=''
    <p> Hashtag: <%= f.text_field :hashtag %> </p>
    <p> Content: <%= f.text_area :content %>
    </p>
    </div>
    <div class="modal-footer">
        <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
        <%= button_to  "Create", { action: 'create', controller: 'message'} , remote: true, form: { "data-type" => "json" } %>
        <%= button_to "new message" , temote:true %>
    </div>

    <% end %>
    <input type="text" ng-model='message'>
</div>-->
<div class="row">
    <div class="col-md-1">
        <% if user_signed_in? %>
        <div type="button" class="btn btn-default"><%= link_to 'Edit profile', edit_user_registration_path %></div>
        <% end %>
    </div>
<div class="col-md-2"  id="my-container">
   <div type="button" class="btn btn-default"> <%= link_to 'Add_message', controller: "message", action: "new"%></div>
</div>

<div class="col-md-4" ng-app="myModule">

    <% if user_signed_in? %>

    Logged in as <strong><%= current_user.email %></strong>.

    <%= link_to "Logout", destroy_user_session_path, method: :delete, :class => 'btn btn-primary'  %>
    <% else %>
    <%= link_to "Sign up", new_user_registration_path, :class => 'btn btn-primary'  %>
    <%= link_to "Login", new_user_session_path, :class => 'navbar-link'  %>
    <% end %>
   <!-- <div ng-controller="messageController">
        <div>
            <h3>Add a new message</h3>
            <form ng-submit="addMessage()">
                <div class="row">
                    <div class="col-xs-6">
                        <input type="text" ng-model="newMessage.hashtag" class="form-control" placeholder="Hashtag" />
                    </div>
                    <div class="col-xs-6">
                        <input type="text" ng-model="newMessage.content" class="form-control" placeholder="Content" />
                    </div>
                </div>
                <div class="row">
                    <div class="col-xs-12 text-center">
                        <br />
                        <input type="Submit" value="Add Message" class="btn btn-primary" />
                    </div>
                </div>
            </form>
        </div>
</div>-->

</div>
    <div class="col-md-2"><p id="location_lat"> </p> <p id="location_lng"> </p> </div>
</div>
<div id="map">
</div>
<script type="text/javascript">
    var map;
    function initMap() {
         map = new google.maps.Map(document.getElementById('map'), {
            center: {lat: -34.397, lng: 150.644},
            zoom: 6,
            mapTypeId:google.maps.MapTypeId.ROADMAP
        });
        var infoWindow = new google.maps.InfoWindow({map: map});

        // Try HTML5 geolocation.
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(function(position) {
                var pos = {
                    lat: position.coords.latitude,
                    lng: position.coords.longitude
                };
                document.getElementById("location_lat").innerHTML=pos.lat;
                document.getElementById("location_lng").innerHTML=pos.lng;
                var myLocation = pos;
                infoWindow.setPosition(pos);
                infoWindow.setContent('Location found.');
                map.setCenter(pos);
            }, function() {
                handleLocationError(true, infoWindow, map.getCenter());
            });
        } else {
            // Browser doesn't support Geolocation
            handleLocationError(false, infoWindow, map.getCenter());
        }
    }

    function handleLocationError(browserHasGeolocation, infoWindow, pos) {
        infoWindow.setPosition(pos);
        infoWindow.setContent(browserHasGeolocation ?
                'Error: The Geolocation service failed.' :
                'Error: Your browser doesn\'t support geolocation.');
    }
    google.maps.event.addDomListener(window, 'load', initMap());
</script>

</body>
</html>